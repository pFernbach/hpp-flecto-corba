from hpp.corbaserver import * 
from hpp.corbaserver.rod import Robot
from hpp.corbaserver.flecto import FlectoViewer
from hpp.corbaserver import ProblemSolver
from hpp.gepetto import PathPlayer
import time  

seq = [[0.02,0,0,0,1,0,0,0],[0.02,0.0203879,0.000783012,6.89226e-05,0.997535,0.0584614,0.00100014,0.038916],[0.02,0.0406432,0.00322321,-6.40664e-05,0.989872,0.11594,0.019209,0.0797437],[0.02,0.0605833,0.0074521,-0.000885591,0.976394,0.17137,0.0540721,0.119943],[0.02,0.0799447,0.0135673,-0.00283324,0.956337,0.223566,0.104233,0.156857],[0.02,0.0983731,0.0215999,-0.00626766,0.929051,0.27126,0.167465,0.187816],[0.02,0.115442,0.0314824,-0.0114429,0.894303,0.313217,0.240677,0.210319],[0.02,0.130701,0.0430294,-0.0184827,0.852535,0.34841,0.320064,0.222267],[0.02,0.143739,0.0559385,-0.0273729,0.805001,0.376224,0.401391,0.22219],[0.02,0.154258,0.0698175,-0.0379765,0.75374,0.396607,0.480407,0.209409],[0.02,0.162119,0.0842285,-0.0500721,0.701356,0.410134,0.553246,0.18408],[0.02,0.167367,0.098739,-0.063406,0.650698,0.417956,0.616735,0.147095],[0.02,0.170218,0.112963,-0.0777441,0.604496,0.421645,0.668533,0.0999088],[0.02,0.171024,0.126582,-0.0929116,0.565068,0.422996,0.707075,0.0443257],[0.02,0.170229,0.139345,-0.10881,0.534119,0.423819,0.731411,-0.0176638],[0.02,0.168328,0.15105,-0.125416,0.512645,0.425772,0.740992,-0.0839744],[0.02,0.165837,0.161522,-0.142752,0.500915,0.430238,0.735506,-0.15244],[0.02,0.163276,0.170583,-0.160856,0.498583,0.43829,0.714671,-0.220764],[0.02,0.161149,0.178037,-0.17973,0.504276,0.450418,0.678939,-0.286538],[0.02,0.159933,0.183674,-0.1993,0.516576,0.466971,0.62834,-0.347126],[0.02,0.16005,0.187278,-0.219377,0.533214,0.487722,0.564014,-0.399873],[0.02,0.161846,0.188667,-0.239646,0.551691,0.512165,0.487777,-0.442245],[0.02,0.165554,0.187729,-0.259677,0.569409,0.539572,0.402368,-0.472125],[0.02,0.171278,0.184461,-0.278974,0.583944,0.569146,0.311398,-0.488129],[0.02,0.178988,0.17899,-0.297042,0.59329,0.600174,0.2191,-0.489844],[0.02,0.188538,0.171574,-0.313464,0.596031,0.632148,0.12992,-0.477926],[0.02,0.199713,0.162573,-0.327958,0.591395,0.664821,0.0480744,-0.454003],[0.02,0.212272,0.152413,-0.340413,0.579169,0.698177,-0.0228315,-0.420441],[0.02,0.226003,0.141545,-0.350883,0.559535,0.732323,-0.0800221,-0.380026],[0.02,0.240744,0.130419,-0.359558,0.532875,0.767339,-0.121606,-0.335666],[0.02,0.256403,0.11947,-0.366726,0.499658,0.803023,-0.14654,-0.290248],[0.02,0.272938,0.10912,-0.372725,0.460136,0.839063,-0.154416,-0.246225],[0.02,0.290334,0.0997905,-0.377909,0.414643,0.874464,-0.145505,-0.206001],[0.02,0.308561,0.091909,-0.382615,0.363455,0.907807,-0.120644,-0.171632],[0.02,0.327531,0.0859061,-0.387143,0.306962,0.937229,-0.0812929,-0.144891],[0.02,0.347061,0.0821973,-0.391738,0.245807,0.960594,-0.0295962,-0.127242],[0.02,0.36685,0.0811459,-0.396579,0.181008,0.97577,0.0315717,-0.119767],[0.02,0.386487,0.0830143,-0.401774,0.114001,0.980999,0.0986529,-0.123082],[0.02,0.405479,0.0879162,-0.407362,0.0465897,0.975268,0.167586,-0.137256],[0.02,0.423321,0.0957873,-0.413333,-0.0192287,0.958592,0.234118,-0.16178],[0.02,0.439564,0.106386,-0.419644,-0.0814955,0.9321,0.294191,-0.195612],[0.02,0.453877,0.119328,-0.426254,-0.138539,0.89791,0.344299,-0.237288],[0.02,0.466092,0.134139,-0.433151,-0.189152,0.858809,0.381721,-0.28507],[0.02,0.476205,0.150322,-0.440373,-0.232672,0.817846,0.404601,-0.337086],[0.02,0.484354,0.167396,-0.448022,-0.268939,0.777945,0.411873,-0.391416],[0.02,0.490782,0.184928,-0.45626,-0.298195,0.741604,0.403113,-0.446114],[0.02,0.495791,0.202527,-0.465303,-0.320938,0.710708,0.378387,-0.499171],[0.02,0.499709,0.219829,-0.4754,-0.337799,0.686454,0.338162,-0.548463],[0.02,0.502854,0.236464,-0.486801,-0.349449,0.669346,0.283302,-0.591711],[0.02,0.505522,0.252038,-0.49972,-0.356564,0.65924,0.215153,-0.626508]]


white=[1.0,1.0,1.0,1.0]
green=[0.23,0.75,0.2,0.5]
yellow=[0.85,0.75,0.15,0.5]

robot = Robot ('robot_rod')
robot.tf_root = 'base_link'
robot.setJointBounds ("Rod_Joint", [-1,1,-1,1,-1,1,-1,1,-1,1,-1,1])

#create robot : (fait en c++ mtn )
#robot.client.robot.createJoint("Rod_Joint","rod",[0,0,0,1,0,0,0],[-1,1,-1,1,-1,1,-1,1,-1,1,-1,1])
#robot.client.robot.createJoint("anchorJoint0","anchor",[0,0,0,1,0,0,0],[])
#robot.client.robot.addJoint("anchorJoint0","Rod_Joint")


#init objetcs : 
ps = ProblemSolver (robot)
v = FlectoViewer (ps)
pp = PathPlayer (robot.client, v)

v.createRod('robot_rod',yellow,0.01,1,len(seq))
robot.rod.getRodCapsule('robot_rod',1)

#v([0,0,0,0,0,0])

v.applyRodConfiguration('robot_rod',seq,False)
v.client.gui.refresh()
v.client.gui.addLandmark(v.sceneName,1)
v.client.gui.addLandmark("robot_rod/cap0",0.2)
v.client.gui.addLandmark(robot.rod.getRodCapsule('robot_rod',len(seq)-1),-0.2)


#seq = [[0.0526316,0,0,0,1,0,0,0],[0.0526316,0.0521021,0.00162961,-0.00620368,0.979072,-0.163742,0.115482,0.0362613],[0.0526316,0.101217,0.000423862,-0.0246585,0.914555,-0.325656,0.238637,0.026411],[0.0526316,0.143954,-0.0123251,-0.0521436,0.795413,-0.478732,0.371002,-0.0262116],[0.0526316,0.175719,-0.0425005,-0.0805611,0.607076,-0.604597,0.503456,-0.112781],[0.0526316,0.192138,-0.0888352,-0.0976098,-0.348143,0.675361,-0.613819,0.214351],[0.0526316,0.192955,-0.140463,-0.0923456,0.0470678,-0.668379,0.677552,-0.303116],[0.0526316,0.184438,-0.182258,-0.062753,-0.247632,-0.586202,0.684883,-0.354271],[0.0526316,0.17633,-0.204884,-0.0165788,-0.493769,-0.45658,0.647877,-0.356691],[0.0526316,0.176527,-0.209037,0.0354909,0.677381,0.311278,-0.587918,0.312289],[0.0526316,0.188744,-0.202067,0.0859481,0.803266,0.173677,-0.522674,0.225093],[0.0526316,0.213076,-0.193374,0.131604,0.882507,0.0522691,-0.456652,0.0966938],[0.0526316,0.246657,-0.192086,0.171893,0.918098,-0.0500325,-0.385542,-0.074113],[0.0526316,0.283122,-0.205784,0.206919,0.902773,-0.133699,-0.299761,-0.277074],[0.0526316,0.312963,-0.236659,0.236636,0.821807,-0.19487,-0.193409,-0.498566],[0.0526316,0.324278,-0.281318,0.260721,0.660932,-0.222558,-0.0628366,-0.712962],[0.0526316,0.309126,-0.32735,0.279067,-0.427403,0.212808,-0.0841323,0.873947],[0.0526316,0.27038,-0.358775,0.29315,-0.160579,0.169748,-0.23024,0.943985],[0.0526316,0.220631,-0.366317,0.306352,0.0907054,0.110352,-0.360081,0.921198]]





